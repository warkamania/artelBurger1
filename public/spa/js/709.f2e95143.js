(self["webpackChunk_1"]=self["webpackChunk_1"]||[]).push([[709],{3744:(t,e,s)=>{"use strict";s.d(e,{A:()=>n});var a=s(1809);const n=(0,a.Q_)("counter",{state:()=>({quantity:1,options:{1:"котлета из мраморной говядины (+90 ₽)",2:"котлета свиная (+80 ₽)",3:"котлета куриная (+70 ₽)",4:"сыр Чеддер (+30 ₽)",5:"окорок прошутто (+80 ₽)",6:"яйцо на гриле (+30 ₽)",7:"перец халапеньо (+50 ₽)",8:"бекон (+70 ₽)",9:"соус шрирача (+50 ₽)"},optionsPrice:{1:90,2:80,3:70,4:30,5:80,6:30,7:50,8:70,9:50},sauce:{1:"Томатный соус",2:"Сливочный соус"},menu:"",summa:0,Card:[]}),actions:{increment(t){t.quantity++},dicrement(t){t.quantity--},clickMenu(t){t.menu="Меню"}}})},2239:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>ut});var a=s(9835),n=s(6970),o=s(1957);const i=t=>((0,a.dD)("data-v-3d3e97ed"),t=t(),(0,a.Cn)(),t),l={class:"q-pa-md row items-start"},r={class:"col-12",id:"id"},d={class:"row"},c={class:"col-10 text-white text-h6"},u={"col-2":""},m={class:"row"},p={class:"col-4"},h=["src"],C={class:"col-8 text-white text-h6"},y={class:"row"},w={class:"col-2"},_={class:"col-2"},f={class:"col-2"},k=i((()=>(0,a._)("div",{class:"col-3 text-white text-h6"},"Цена:",-1))),g={class:"col-3 price"},v={class:"fit row wrap items-end content-end justify-end"},b=i((()=>(0,a._)("div",{class:"col-9",style:{color:"white","font-size":"25px"}}," Стоимость заказ: ",-1))),q={class:"col-3 price"},V={class:"fit row wrap items-end content-end justify-end"},W=i((()=>(0,a._)("div",{class:"col-9 textGradient12",style:{"font-size":"22px"}}," начислим бонусов: ",-1))),H={class:"col-3 textGradient12",style:{"font-size":"22px"}},O=i((()=>(0,a._)("br",null,null,-1))),P={class:"fit row wrap justify-center items-end self-end"},T=(0,a.Uk)("Оформить заказ"),I=(0,a.Uk)(" `` "),x={class:"row"},U={class:"col-12"},Z=i((()=>(0,a._)("br",null,null,-1))),j=i((()=>(0,a._)("br",null,null,-1))),D={class:"fit row wrap justify-center items-end self-end"},S=(0,a.Uk)("Оплатить"),Q=i((()=>(0,a._)("div",{id:"payment-form"},null,-1))),z={class:"row"},A={class:"col-12"},M=i((()=>(0,a._)("img",{src:"check_circle_outline_black_48dp.svg",alt:"",class:"fit row justify-center"},null,-1))),N=i((()=>(0,a._)("h5",{style:{color:"white"}},"Ваш заказ принят",-1)));function R(t,e,s,i,R,B){const K=(0,a.up)("q-btn"),Y=(0,a.up)("q-input"),J=(0,a.up)("q-card-section"),G=(0,a.up)("q-card"),L=(0,a.up)("q-intersection"),E=(0,a.up)("q-icon"),F=(0,a.up)("q-select"),X=(0,a.up)("q-dialog"),$=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)($,null,{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.Cards,((t,e)=>((0,a.wg)(),(0,a.j4)(L,{key:t,once:"",transition:"scale"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(G,{class:"my-card bg-black"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",c,(0,n.zw)(e+1),1),(0,a._)("div",u,[(0,a.Wm)(K,{flat:"",icon:"close",class:"items-end",color:"white",onClick:t=>B.deleteCard(e)},null,8,["onClick"])])]),(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",p,[(0,a._)("img",{src:B.mapImg[e],class:"",alt:""},null,8,h)]),(0,a._)("div",C,(0,n.zw)(B.mapTitles[e]),1)]),(0,a._)("div",y,[(0,a._)("div",w,[(0,a.Wm)(K,{flat:"",icon:"remove",color:"white",onClick:t=>B.CounterMinus(e)},null,8,["onClick"])]),(0,a._)("div",_,[(0,a.Wm)(Y,{dense:"",dark:"",color:"red",outlined:"",modelValue:B.mapCount[e],"onUpdate:modelValue":t=>B.mapCount[e]=t,type:"number",class:"fit row wrap justify-center"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a._)("div",f,[(0,a.Wm)(K,{flat:"",icon:"add",color:"white",onClick:t=>B.CounterPlus(e)},null,8,["onClick"])]),k,(0,a._)("div",g,(0,n.zw)(B.mapPrice[e]*B.mapCount[e])+" р",1)])])),_:2},1024)])),_:2},1536),[[o.F8,i.Open]])])),_:2},1024)))),128))])]),(0,a._)("div",v,[b,(0,a._)("div",q,(0,n.zw)(B.totalPrice)+" р",1)]),(0,a._)("div",V,[W,(0,a._)("div",H,"+ "+(0,n.zw)(B.Bonus),1)]),O,(0,a._)("div",P,[(0,a.Wm)(K,{color:"red",onClick:e[0]||(e[0]=t=>i.alert=!0)},{default:(0,a.w5)((()=>[T])),_:1})]),I,(0,a.Wm)(X,{modelValue:i.alert,"onUpdate:modelValue":e[6]||(e[6]=t=>i.alert=t)},{default:(0,a.w5)((()=>[(0,a._)("div",x,[(0,a._)("div",U,[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Wm)(J,{class:"bg-black"},{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{dark:"",standout:"","bottom-slots":"",modelValue:i.adres,"onUpdate:modelValue":e[2]||(e[2]=t=>i.adres=t),label:"Адрес доставки",counter:"",readonly:t.readonly,disable:t.disable,color:"red"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(E,{name:"place"})])),append:(0,a.w5)((()=>[(0,a.Wm)(E,{name:"close",onClick:e[1]||(e[1]=e=>t.text=""),class:"cursor-pointer"})])),_:1},8,["modelValue","readonly","disable"]),Z,(0,a.Wm)(Y,{type:"tel",dark:"",standout:"","bottom-slots":"",modelValue:i.tel,"onUpdate:modelValue":e[3]||(e[3]=t=>i.tel=t),label:"Номер телефона",counter:"",readonly:t.readonly,disable:t.disable,color:"red"},{prepend:(0,a.w5)((()=>[(0,a.Wm)(E,{name:"phone"})])),_:1},8,["modelValue","readonly","disable"]),(0,a.Wm)(F,{dark:"",modelValue:i.payment,"onUpdate:modelValue":e[4]||(e[4]=t=>i.payment=t),options:i.options,label:"Способ оплаты",color:"red"},null,8,["modelValue","options"]),j,(0,a._)("div",D,[(0,a.Wm)(K,{color:"red",onClick:e[5]||(e[5]=t=>(B.addCard,B.paymentRendered()))},{default:(0,a.w5)((()=>[S])),_:1})])])),_:1})])),_:1})])])])),_:1},8,["modelValue"]),(0,a.Wm)(X,{modelValue:i.pay,"onUpdate:modelValue":e[7]||(e[7]=t=>i.pay=t)},{default:(0,a.w5)((()=>[Q])),_:1},8,["modelValue"]),(0,a.Wm)(X,{modelValue:i.Order,"onUpdate:modelValue":e[8]||(e[8]=t=>i.Order=t)},{default:(0,a.w5)((()=>[(0,a._)("div",z,[(0,a._)("div",A,[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[(0,a.Wm)(J,{class:"bg-black"},{default:(0,a.w5)((()=>[M,N])),_:1})])),_:1})])])])),_:1},8,["modelValue"])])),_:1})}var B=s(499),K=(s(4987),s(9981)),Y=s.n(K),J=s(3744),G=(s(1470),s(4409)),L=s.n(G);var E=s(320);const F={setup(){const t=(0,J.A)(),e=()=>t.increment(),s=()=>t.dicrement();return{alert:(0,B.iH)(!1),payment:(0,B.iH)(""),options:["Онлайн","Картой при получении","Наличными при получении"],Order:(0,B.iH)(!1),tel:(0,B.iH)(""),adres:(0,B.iH)(""),menu:(0,B.iH)([]),count:(0,B.iH)(null),number:(0,B.iH)(0),title:(0,B.iH)(""),price:(0,B.iH)(null),id:(0,B.iH)(null),quantity:(0,B.iH)(1),Open:(0,B.iH)(!0),Cards:(0,B.iH)([]),date:(0,B.iH)(Date),pay:(0,B.iH)(!1),result:[],Confrimm:(0,B.iH)(null),confrimToken:(0,B.iH)(null),store:t,incrementCount:e,decrementCount:s}},async mounted(){this.Cards=this.store.Card,this.store.summa=this.totalPrice,localStorage.setItem("Card",JSON.stringify(this.Cards))},updated(){this.Cards=JSON.parse(localStorage.getItem("Card")),this.store.summa=this.totalPrice},watch:{sum1(){this.store.summa=this.totalPrice}},computed:{numberOrder(){const t=this.number.length+1;return t},parseTitle(){return this.Cards.length>0?this.Cards[0].title:""},parseImg(){return this.Cards.length>0?this.Cards[0].img:""},DataNow(){return(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"})},Bonus(){return Math.round(.03*this.totalPrice)},quantitys(){return this.store.quantity},adds(){return this.Cards.length>0?this.Cards.options:""},option(){return this.Cards.length>0?this.Cards[0].option:""},sum(){return this.mapPrice[0]*this.Cards.length*this.quantitys},totalPrice(){let t=[];if(this.Cards.length){for(let e in this.mapCount)t.push(this.mapPrice[e]*this.mapCount[e]);return t=t.reduce(((t,e)=>t+e)),t}return 0},mapTitles(){return L().map(this.Cards,"title")},mapPrice(){return L().map(this.Cards,"price")},mapImg(){return L().map(this.Cards,"img")},mapId(){return L().map(this.Cards,"id")},mapCount(){return L().map(this.Cards,"count")},IdempotenceKey(){return(0,E.Z)()}},methods:{Close(){this.Open=!1},CounterPlus(t){this.store.quantity++,this.store.Card[t].count++},CounterMinus(t){this.store.quantity--,this.store.Card[t].count--,0==this.quantitys&&deleteCard(t)},OpdenOrder(){},persist(){this.Cards.push({tel:this.tel,adres:this.adres,payment:this.payment,quantity:this.quantity,numberOrder:this.numberOrder,options:this.adds}),this.saveCard(),setTimeout((()=>{this.deleteCard()}),1e4)},saveCard(){const t=JSON.stringify(this.Cards);localStorage.setItem("Card",t)},deleteCard(t){this.Cards.splice(t,1)},async addCard(){this.adres,this.quantity,this.payment,this.sum,this.tel,this.parseTitle,this.DataNow,this.option,this.adds;const t=!0,e="Наименование: "+this.parseTitle+",   Колличество:  "+this.quantity+"\nОплата:  "+this.payment+",   Сумма:  "+this.sum+"\n Адрес:  "+this.adres+",   Телефон:   "+this.tel+",   Дата:   "+this.DataNow;let s={to:"warkamania5@yandex.ru",subject:"Доставка из мобильного приложения",body:e},a=await Y().post("http://80.240.250.157:1728/send-email",s,{crossDomain:t}),n=a.data1;console.log(n),this.deleteCard(),this.newCurdContent="",console.log("Корзина  сохранена"),this.Order=!0,this.alert=!1},Paymentt(){const t=YooMoneyCheckout(317549);t.tokenize({number:"4793128161644804",cvc:"333",month:"01",year:"30"}).then((t=>{if("success"===t.status){const{paymentToken:e}=t.data.response;return this.token=e,console.log(e),e}}))},paymentRendered(){this.alert=!1,this.pay=!0,this.Confirmation(),setTimeout((()=>{const t=new window.YooMoneyCheckoutWidget({confirmation_token:this.confrimToken,return_url:"https://artel5-9ggd.vercel.app/#/CardApp",error_callback:function(t){console.log(t)}});t.render("payment-form")}),3e3)},Confirmation(){const t=!0;let e={headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Credentials":!0,crossDomain:t,"Idempotence-Key":this.IdempotenceKey}};const s={317549:"test_0qe9Cff_Lpscs8vZDrKjk3Jd2tbnBF6YLYRRTxk81jw",amount:{value:this.totalPrice,currency:"RUB"},confirmation:{type:"embedded"},capture:!0,description:"Заказ №72"};Y().post("https://api.yookassa.ru/v3/payments",s,e).then((t=>{const e=t.data;this.Confrimm=L().find(e,"confirmation_token"),console.log(this.Confrimm),this.confrimToken=this.Confrimm.confirmation_token,console.log(this.confrimToken)})).catch((t=>{console.log(t)}))}}};var X=s(1639),$=s(9885),tt=s(1517),et=s(4458),st=s(8879),at=s(3190),nt=s(6611),ot=s(7743),it=s(2857),lt=s(6764),rt=s(9984),dt=s.n(rt);const ct=(0,X.Z)(F,[["render",R],["__scopeId","data-v-3d3e97ed"]]),ut=ct;dt()(F,"components",{QPage:$.Z,QIntersection:tt.Z,QCard:et.Z,QBtn:st.Z,QCardSection:at.Z,QInput:nt.Z,QDialog:ot.Z,QIcon:it.Z,QSelect:lt.Z})},4654:()=>{}}]);